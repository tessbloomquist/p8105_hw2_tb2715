---
title: "p8105_hw2_tb2715"
author: "Tess"
date: "9/24/2019"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

##Load libraries
```{r}
library(tidyverse)
library(readxl)
```

##Read in dataset
```{r}

baby_name = read_csv(file = "./data/Popular_Baby_Names.csv")

#cpi_data = read_csv(file = "./data/fivethirtyeight_datasets/cpi.csv")

#gdp_data = read_csv(file = "./data/fivethirtyeight_datasets/GDP.csv")

#recession_data = read_csv(file = "./data/fivethirtyeight_datasets/recessions.csv")

```

##Clean trash wheel data
```{r}
trash_wheel = read_excel(path = "./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", 
                         sheet = "Mr. Trash Wheel",
                         col_names = TRUE)
trash_wheel

tidy_trash_wheel =
  janitor::clean_names(trash_wheel) %>%
  drop_na(dumpster) %>%
  select(-x15) %>%
  as.integer("sports_balls") #this code does not work. identify issue with dbl to integer

precipitation_18 = read_excel(path = "./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", 
  sheet = "2018 Precipitation", 
  skip = 1,
  col_names = TRUE) %>%
  drop_na(Total) %>%
  mutate(Year = "2018")


precipitation_17 = read_excel(path = "./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", 
  sheet = "2017 Precipitation", 
  skip = 1,
  col_names = TRUE) %>%
  drop_na(Total) %>%
  mutate(Year = "2017")

precipitation_data = 
  full_join(precipitation_18, precipitation_17, by = "Month") %>%
  month.abb(Month)


```

##Problem 2
```{r}
pols_data = read_csv(file = "./data/fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>% 
  separate(col = mon, into = c("year", "month", "day")) %>%
  mutate(
    month = recode(month, "01" = "January", 
                   "02" = "February", 
                   "03" = "March", 
                   "04" = "April", 
                   "05" = "May", 
                   "06" = "June", 
                   "07" = "July", 
                   "08" = "August", 
                   "09" = "September", 
                   "10" = "October", 
                   "11" = "November", 
                   "12" = "December") %>%
      mutate(as.numeric(as.character(prez_dem))) %>%
  mutate(president = recode(prez_dem, "0" = "gop", "1" = "dem")))

pols_data_tidy =
      mutate(pols_data,
             president = prez_gop - prez_dem) %>%
  
  mutate(president, if_else("president" = "-1", "dem", "gop"))
        
 
###pols_data_tidy =
  arrange(pols_data, prez_gop)
  pivot_longer(
    pols_data,
    prez_gop:prez_dem,
    names_to = "presidentparty", 
    values_to = "president"
  )
snp_data = read_csv(file = "./data/fivethirtyeight_datasets/snp.csv") %>%
  janitor::clean_names() %>% 
  separate(col = date, into = c("month", "day", "year")) %>%
  mutate(
    month = recode(month, "1" = "January", 
                   "2" = "February", 
                   "3" = "March", 
                   "4" = "April", 
                   "5" = "May", 
                   "6" = "June", 
                   "7" = "July", 
                   "8" = "August", 
                   "9" = "September", 
                   "10" = "October", 
                   "11" = "November", 
                   "12" = "December") %>%
      arrange(year, month, day, close), 1, 0)


unemployment_data = read_csv(file = "./data/fivethirtyeight_datasets/unemployment.csv")

tidy_unemployment_data = 
  pivot_longer(
    unemployment_data, 
    Jan:Dec, 
    names_to = "month", 
    values_to = "unemployed")
  )
```


---
title: "p8105_hw2_tb2715"
author: "Tess"
date: "9/24/2019"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

##Load libraries
```{r}
library(tidyverse)
library(readxl)
```

##Read in dataset
```{r}



#cpi_data = read_csv(file = "./data/fivethirtyeight_datasets/cpi.csv")

#gdp_data = read_csv(file = "./data/fivethirtyeight_datasets/GDP.csv")

#recession_data = read_csv(file = "./data/fivethirtyeight_datasets/recessions.csv")

```

##Clean trash wheel data
```{r}
trash_wheel = read_excel(path = "./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", 
                         sheet = "Mr. Trash Wheel",
                         col_names = TRUE)
trash_wheel

tidy_trash_wheel =
  janitor::clean_names(trash_wheel) %>%
  drop_na(dumpster) %>%
  select(-x15) %>%
  as.integer("sports_balls") #this code does not work. identify issue with dbl to integer

precipitation_18 = read_excel(path = "./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", 
  sheet = "2018 Precipitation", 
  skip = 1,
  col_names = TRUE) %>%
  drop_na(Month) %>%
  mutate(Year = "2018")


precipitation_17 = read_excel(path = "./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", 
  sheet = "2017 Precipitation", 
  skip = 1,
  col_names = TRUE) %>%
  drop_na(Month) %>%
  mutate(Year = "2017")

precipitation_data = 
  full_join(precipitation_18, precipitation_17, by = "Month") %>%
  mutate(Month = sample(month.name, 12)) %>%
  arrange(months, month.name)
#how to use month.name


```

##Problem 2
```{r}
#upload and clean pols_data
pols_data = read_csv(file = "./data/fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>% 
  separate(col = mon, into = c("year", "month", "day")) %>%
  mutate(
    month = recode(month, "01" = "January", 
                   "02" = "February", 
                   "03" = "March", 
                   "04" = "April", 
                   "05" = "May", 
                   "06" = "June", 
                   "07" = "July", 
                   "08" = "August", 
                   "09" = "September", 
                   "10" = "October", 
                   "11" = "November", 
                   "12" = "December")) %>%
  mutate(president = recode(prez_dem, `1` = "dem", `0` = "gop"))
      
pols_data_tidy = 
  select(pols_data, -prez_gop, -prez_dem, -day)

#upload and clean snp_data
snp_data = read_csv(file = "./data/fivethirtyeight_datasets/snp.csv") %>%
  janitor::clean_names() %>% 
  separate(col = date, into = c("month", "day", "year")) %>%
  mutate(
    month = recode(month, "1" = "January", 
                   "2" = "February", 
                   "3" = "March", 
                   "4" = "April", 
                   "5" = "May", 
                   "6" = "June", 
                   "7" = "July", 
                   "8" = "August", 
                   "9" = "September", 
                   "10" = "October", 
                   "11" = "November", 
                   "12" = "December")) 

snp_data_tidy =
  snp_data %>%
  distinct(year, month, close)
      
#upload and clean unemployment_data
unemployment_data = read_csv(file = "./data/fivethirtyeight_datasets/unemployment.csv") %>%
  janitor::clean_names() %>%
  mutate(#rename the month variables)

tidy_unemployment_data = 
  pivot_longer(
    unemployment_data, 
    Jan:Dec, 
    names_to = "month", 
    values_to = "unemployed")

#merge data sets
merge1 = 
  merge(snp_data_tidy, pols_data_tidy, by = c("year","month"))

merge2 = 
  merge(merge1, tidy_unemployment_data, by = c("year","month"))
  
```

##Problem 3
```{r}
baby_name = read_csv(file = "./data/Popular_Baby_Names.csv") %>%
  janitor::clean_names() %>%
  distinct(childs_first_name, ethnicity, year_of_birth, count, rank, gender) 

tidy_baby_name = 
  pivot_wider(
    baby_name,
    names_from = "year_of_birth", 
    values_from = "count"  
  ) 


tidy_baby_name
  pivot_wider(
    tidy_baby_name, 
    names_from = "childs_first_name", 
    values_from = "ethnicity"
  )
  

olivia_baby =
  filter(tidy_baby_name, childs_first_name == "Olivia") %>%
  aggregate("ethnicity", FUN= length)
  
```

